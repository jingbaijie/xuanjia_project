function AjaxFun(option){this.option=null,this.url=null,this.Async=null,this.method=null,this.formatParams=function(data){var arr=[];for(var name in data)arr.push(encodeURIComponent(name)+"="+encodeURIComponent(data[name]));return arr.join("&")},this.params=null,this.paramsStr=null,this.contentType=null,this.data=null,this.init=function(option){var xhr;this.option=option||{},this.url=this.option.url,this.Async=this.option.async||!0,this.method=this.option.method.toUpperCase(),this.params=this.formatParams(this.option.params),this.paramsStr=this.option.paramsStr,this.contentType=this.option.ContentType||"",this.data=null,xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status?option.success&&option.success(eval("("+xhr.responseText+")")):option.fail&&option.fail(status))},"POST"==this.method?(xhr.open(this.method,this.url,this.Async),""==this.contentType?xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"):xhr.setRequestHeader("Content-type",this.contentType),xhr.send(this.params)):"GET"==this.method?(xhr.open(this.method,this.url+"?"+this.params,this.Async),xhr.send(null)):"POSTSTR"==this.method?(xhr.open("POST",this.url,this.Async),""==this.contentType?xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"):xhr.setRequestHeader("Content-type",this.contentType),xhr.send(this.paramsStr)):"GETSTR"==this.method&&(xhr.open("GET",this.url,this.Async),xhr.send(null))}}var actiAjax=new AjaxFun,actiUserId=CT.getCookie("actiUserId")+"",actiUserToken=CT.getCookie("userToken")+"",actiCarrierId=CT.getCookie("carrierId")+"",nns_device_id=CT.getCookie("nns_device_id")+"",nns_version=CT.getCookie("nns_version")+"",actiActivityId=CT.getCookie("activityId")+"",actiPid=CT.getCookie("pid")+"";-1===actiPid.indexOf("activity")&&(actiPid=actiPid+"_activityId"+actiActivityId);var actiActionUrl="http://120.210.209.6:8090/xlcartoon_activity_BtopInterface",actiObj=function(){function Acti(){}return Acti.prototype={getAuthResultUrl:actiActionUrl+"/orderInterface/getActivityAAAResult",toActiOrderUrl:actiActionUrl+"/orderInterface/activityOrder",getUserPhoneUrl:actiActionUrl+"/ActivityUserInterface/getUserInfo",getChanceUrl:actiActionUrl+"/ActivityBtopInterface/getActivityChance",setChanceUrl:actiActionUrl+"/ActivityBtopInterface/saveActivityChance",getUserCreditUrl:actiActionUrl+"/ActivityCreditInterface/getActivityUserCredit",setUserCreditUrl:actiActionUrl+"/ActivityCreditInterface/saveActivityCredit",getUserRankListUrl:actiActionUrl+"/ActivityCreditInterface/getActivityUserCreditRankID",getActivityRankListUrl:actiActionUrl+"/ActivityCreditInterface/getActivityCreditTopList",setUserPhoneUrl:actiActionUrl+"/ActivityUserInterface/saveUserPhone",getActivityPrizeUrl:actiActionUrl+"/ActivityPrizeInterface/getActivityPrizeList",setPrizeUrl:actiActionUrl+"/ActivityPrizeInterface/setUserPrize",getUserPrizeInfoUrl:actiActionUrl+"/ActivityPrizeInterface/getActivityUserPrize",getPrizeUserInfoUrl:actiActionUrl+"/ActivityPrizeInterface/getActivityUserPrizeList",getUserDataListUrl:actiActionUrl+"/ActivityUserDataInterface/getActivityUserDataList",setUserDataListUrl:actiActionUrl+"/ActivityUserDataInterface/setActivityUserData",setActivityLogUrl:actiActionUrl+"/ActivityLogInterface/setlog_activity",TJgetAuthUrl:"http://202.99.114.74:58906/xjcartoon_FrontEndWeb/activityOtherAuth",TJOutOrderUrl:"http://202.99.114.74:58906/xjcartoon_FrontEndWeb/page.action?action=activityOutOrder",TJNeiOrderUrl:"http://202.99.114.74:58906/xjcartoon_FrontEndWeb/activityNeiOrder",option:null,trimArgs:function(params){var args="";for(var i in params)""!==args&&(args+="&"),args+=i+"="+params[i];return args},GetQueryString:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(reg);return null!=r?unescape(r[2]):null},querySearchUrlKey:function(url,name){var search,reg,value;if(url&&(search=url.substring(url.indexOf("?")+1)),name){reg=new RegExp("(^|&)"+name+"=([^&]*)($|&)");try{value=search.match(reg)[2]}catch(e){value="null"}}else value="null";return value},getPageName:function(url){var pageName="";if("null"!=(pageName=this.querySearchUrlKey(url,"action")))pageName=this.querySearchUrlKey(url,"action");else try{pageName=url.substring(url.lastIndexOf("/")+1,-1==url.indexOf("?")?url.length:url.indexOf("?"))}catch(e){}return pageName},setLogForActivity:function(prePage,nextPage){var prePageUrl=document.referrer,prePageName=prePage||CT.getCookie("prePageName")+"",nextPageName=nextPage||this.getPageName(window.location.href);"null"===prePageName&&(prePageName=this.getPageName(prePageUrl)),CT.setCookie("prePageName",nextPageName);var logerOption={userId:actiUserId,activityId:actiActivityId,prePage:prePageName,nextPage:nextPageName,from_pid:actiPid,userIp:""},logerArgs=this.trimArgs(logerOption);(new Image).src=this.setActivityLogUrl+"?"+logerArgs},setLogForActivityBySelf:function(nextPage){var prePageUrl=document.referrer,prePageName=CT.getCookie("prePageName")+"",nextPageName=nextPage||this.getPageName(window.location.href);"null"===prePageName&&(prePageName=this.getPageName(prePageUrl)),CT.setCookie("prePageName",nextPageName);var logerOption={userId:actiUserId,activityId:actiActivityId,prePage:prePageName,nextPage:nextPageName,from_pid:actiPid,userIp:""},logerArgs=this.trimArgs(logerOption);(new Image).src=this.setActivityLogUrl+"?"+logerArgs},getAjaxResult:function(option){option.params.vTime=(new Date).getTime(),actiAjax.init({url:option.requestUrl,method:option.type||"get",params:option.params,async:!0,ContentType:"application/x-www-form-urlencoded",success:function(data){option.success&&option.success(data)},fail:function(status){option.fail&&option.fail()}})},getAuthResult:function(fn){var actiTime=(new Date).getTime();this.getAjaxResult({requestUrl:this.getAuthResultUrl,params:{userId:actiUserId,activityId:actiActivityId,userToken:actiUserToken,carrierId:actiCarrierId,nns_device_id:nns_device_id,nns_version:nns_version,actiTime:actiTime},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getUserPhone:function(fn){this.getAjaxResult({requestUrl:this.getUserPhoneUrl,params:{userId:actiUserId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getChance:function(fn){this.getAjaxResult({requestUrl:this.getChanceUrl,params:{userId:actiUserId,activityId:actiActivityId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},setChance:function(fn){this.getAjaxResult({requestUrl:this.setChanceUrl,params:{userId:actiUserId,activityId:actiActivityId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getUserCredit:function(fn){var _this=this;this.getAjaxResult({requestUrl:_this.getUserCreditUrl,params:{userId:actiUserId,activityId:actiActivityId},success:function(data){data&&"success"==data.resultMsg?_this.credit=parseInt(data.creditNum,10):_this.credit=0,fn&&fn(data)},fail:function(){fn&&fn(!1)}})},setUserCredit:function(creditNum,fn){this.getAjaxResult({requestUrl:this.setUserCreditUrl,params:{userId:actiUserId,activityId:actiActivityId,creditNum:creditNum},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getUserRankList:function(fn){this.getAjaxResult({requestUrl:this.getUserRankListUrl,params:{userId:actiUserId,activityId:actiActivityId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getActivityRankList:function(fn){this.getAjaxResult({requestUrl:this.getActivityRankListUrl,params:{activityId:actiActivityId,pageNo:1,pageSize:10,orderbyType:0},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},setUserPhone:function(userPhone,fn){this.getAjaxResult({requestUrl:this.setUserPhoneUrl,params:{userId:actiUserId,userPhone:userPhone},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getActivityPrize:function(fn){this.getAjaxResult({requestUrl:this.getActivityPrizeUrl,params:{activityId:actiActivityId,pageNo:1,pageSize:10},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},setPrize:function(prizeId,fn){this.getAjaxResult({requestUrl:this.setPrizeUrl,params:{activityId:actiActivityId,userId:actiUserId,prizeId:prizeId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getUserPrizeInfo:function(fn){this.getAjaxResult({requestUrl:this.getUserPrizeInfoUrl,params:{activityId:actiActivityId,userId:actiUserId},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getPrizeUserInfo:function(fn){this.getAjaxResult({requestUrl:this.getPrizeUserInfoUrl,params:{activityId:actiActivityId,pageNo:1,pageSize:10},success:function(data){fn&&fn(data)},fail:function(){fn&&fn(!1)}})},getUserDataList:function(fn){var _this=this;this.getAjaxResult({requestUrl:_this.getUserDataListUrl,params:{activityId:actiActivityId,userId:actiUserId},success:function(data){"success"==data.resultMsg?_this.userData=data.list[0].user_acti_data:_this.userData="",fn&&fn(data)},fail:function(){_this.userData="",fn&&fn(!1)}})},setUserDataList:function(userData,fn){var _this=this;this.getAjaxResult({requestUrl:_this.setUserDataListUrl,params:{activityId:actiActivityId,userId:actiUserId,user_acti_data:userData||_this.userData},success:function(data){_this.userData=userData,fn&&fn(data)},fail:function(){fn&&fn(!1)}})},checkFocusAble:function(focusName){return!(!focusName||-1==focusName.indexOf("hands_x0_y0")||!document.getElementById(focusName))},changeFocus:function(focusName){!0===this.checkFocusAble(focusName)&&(curFocus.defaultBlur(),curFocus=getFocusModel6(focusName),curFocus.defaultFocus())},hasClass:function(objDom,cls){return objDom.className.match(new RegExp("(\\s+|^)"+cls+"(\\s+|$)"))},addClass:function(objDom,cls){this.hasClass(objDom,cls)||(objDom.className+=" "+cls)},removeClass:function(objDom,cls){this.hasClass(objDom,cls)&&(objDom.className=objDom.className.replace(new RegExp("(\\s+|^)"+cls+"(\\s+|$)"),""))}},new Acti}(),ActiComm={option:null,trimArgs:function(params){var args="";for(var i in params)""!==args&&(args+="&"),args+=i+"="+params[i];return args},GetQueryString:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(reg);return null!=r?unescape(r[2]):null},querySearchUrlKey:function(url,name){var search,reg,value;if(url&&(search=url.substring(url.indexOf("?")+1)),name){reg=new RegExp("(^|&)"+name+"=([^&]*)($|&)");try{value=search.match(reg)[2]}catch(e){value="null"}}else value="null";return value},getPageName:function(url){var pageName="";if("null"!=(pageName=this.querySearchUrlKey(url,"action")))pageName=this.querySearchUrlKey(url,"action");else try{pageName=url.substring(url.lastIndexOf("/")+1,-1==url.indexOf("?")?url.length:url.indexOf("?"))}catch(e){}return pageName},setLogForActivity:function(prePage,nextPage){var prePageUrl=document.referrer,prePageName=prePage||CT.getCookie("prePageName")+"",nextPageName=nextPage||this.getPageName(window.location.href);"null"===prePageName&&(prePageName=this.getPageName(prePageUrl)),CT.setCookie("prePageName",nextPageName);var logerOption={userId:actiUserId,activityId:actiActivityId,prePageName:prePageName,nextPageName:nextPageName,from_pid:actiPid,userIp:""},logerArgs=this.trimArgs(logerOption);(new Image).src=setActivityLogUrl+"?"+logerArgs},setLogForActivitySelf:function(nextPage){var prePageName=CT.getCookie("prePageName")+"",nextPageName=nextPage;CT.setCookie("prePageName",nextPageName);var logerOption={userId:actiUserId,activityId:actiActivityId,prePage:prePageName,nextPage:nextPageName,from_pid:actiPid,userIp:""},logerArgs=this.trimArgs(logerOption);(new Image).src=setActivityLogUrl+"?"+logerArgs}};